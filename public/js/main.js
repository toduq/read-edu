var app;app=angular.module("app",[]),app.controller("ctrl",["$scope","$sce","API",function(r,e,n){var t;return t=function(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},r.parse=function(){var o;return o=r.content,n.reserve_request(o,function(n){return console.log(n),n=n.map(function(r){var e,n;return"string"==typeof r?t(r):(e=t(r[0]),n=t(r[1]),"<ruby><rb>"+e+"</rb><rp>(</rp><rt>"+n+"</rt><rp>)</rp></ruby>")}),n=n.reduce(function(r,e){return r+e}),r.parsed=e.trustAsHtml(n)})}}]),app.service("API",["$timeout","$http",function(r,e){var n;return n=null,this.reserve_request=function(t,o){return n&&r.cancel(n),n=r(function(){return e.post("/convert",{text:t}).success(function(r){return o(r)}).error(function(r,e,n,t){return console.log(r),console.log(e),console.log(n),console.log(t)})},2e3)},null}]);